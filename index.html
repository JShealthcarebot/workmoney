<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è«‹å‡çµ±è¨ˆè¡¨</title>
  <style>
    body {
      font-family: "Microsoft JhengHei", sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background-color: white;
    }
    th, td {
      border: 1px solid #ccc;
      text-align: center;
      padding: 8px;
    }
    th {
      background-color: #e9ecef;
    }
    tr:nth-child(even) {
      background-color: #f1f3f5;
    }
    .btn {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }
    .btn:hover {
      background-color: #0056b3;
    }
    .result {
      margin-top: 20px;
      background-color: #fff3cd;
      padding: 15px;
      border-radius: 8px;
      font-weight: bold;
    }
    .controls {
      text-align: center;
      margin-bottom: 10px;
    }
    input[type="datetime-local"] {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 5px;
    }
  </style>
</head>
<body>
  <h1>è«‹å‡çµ±è¨ˆè¡¨</h1>
  <div class="controls">
    <button class="btn" onclick="addRow()">â• æ–°å¢ä¸€ç­†</button>
    <button class="btn" onclick="calculate()">ğŸ“Š è¨ˆç®—çµ±è¨ˆ</button>
  </div>
  <table id="leaveTable">
    <thead>
      <tr>
        <th>æœˆä»½</th>
        <th>æ—¥æœŸæ™‚é–“</th>
        <th>å‡åˆ¥</th>
        <th>è«‹å‡æ™‚æ•¸</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody>
      <!-- åˆå§‹ç¯„ä¾‹è³‡æ–™ -->
      <tr>
        <td>1</td>
        <td><input type="datetime-local" /></td>
        <td>
          <select>
            <option value="äº‹å‡">äº‹å‡</option>
            <option value="ç—…å‡">ç—…å‡</option>
            <option value="ç‰¹ä¼‘å‡">ç‰¹ä¼‘å‡</option>
            <option value="ç”Ÿç†å‡">ç”Ÿç†å‡</option>
          </select>
        </td>
        <td><input type="number" value="8" min="0" step="1" /></td>
        <td><button class="btn" onclick="deleteRow(this)">åˆªé™¤</button></td>
      </tr>
    </tbody>
  </table>

  <div id="result" class="result">è«‹è¼¸å…¥è³‡æ–™å¾ŒæŒ‰ã€Œè¨ˆç®—çµ±è¨ˆã€</div>

  <script>
    function addRow() {
      const table = document.getElementById("leaveTable").getElementsByTagName("tbody")[0];
      const newRow = table.insertRow();
      const monthCell = newRow.insertCell(0);
      const dateCell = newRow.insertCell(1);
      const typeCell = newRow.insertCell(2);
      const hoursCell = newRow.insertCell(3);
      const actionCell = newRow.insertCell(4);

      monthCell.innerHTML = `<input type="number" min="1" max="12" placeholder="æœˆ" style="width:60px;">`;
      dateCell.innerHTML = `<input type="datetime-local">`;
      typeCell.innerHTML = `
        <select>
          <option value="äº‹å‡">äº‹å‡</option>
          <option value="ç—…å‡">ç—…å‡</option>
          <option value="ç‰¹ä¼‘å‡">ç‰¹ä¼‘å‡</option>
          <option value="ç”Ÿç†å‡">ç”Ÿç†å‡</option>
        </select>`;
      hoursCell.innerHTML = `<input type="number" value="8" min="0" step="1" style="width:60px;">`;
      actionCell.innerHTML = `<button class="btn" onclick="deleteRow(this)">åˆªé™¤</button>`;
    }

    function deleteRow(button) {
      const row = button.closest("tr");
      row.remove();
    }

    function calculate() {
      const rows = document.querySelectorAll("#leaveTable tbody tr");
      const summary = {};
      let total = 0;

      rows.forEach(row => {
        const monthInput = row.cells[0].querySelector("input");
        const month = monthInput ? monthInput.value : row.cells[0].textContent.trim();
        const type = row.cells[2].querySelector("select").value;
        const hours = parseFloat(row.cells[3].querySelector("input").value) || 0;
        total += hours;
        if (!summary[month]) summary[month] = {};
        if (!summary[month][type]) summary[month][type] = 0;
        summary[month][type] += hours;
      });

      let resultText = `<h3>ğŸ“… çµ±è¨ˆçµæœï¼š</h3>`;
      for (const month in summary) {
        resultText += `<strong>${month}æœˆï¼š</strong><br>`;
        for (const type in summary[month]) {
          resultText += `${type}: ${summary[month][type]} å°æ™‚<br>`;
        }
      }
      resultText += `<br>ğŸŒŸ <strong>ç¸½è«‹å‡æ™‚æ•¸ï¼š</strong> ${total} å°æ™‚`;

      document.getElementById("result").innerHTML = resultText;
    }
  </script>
</body>
</html>
